<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

    <head>
        <title>Reading list</title>
    </head>

    <body>

        <h2 th:text="${error}"></h2>

        <h2>Books</h2>

        <table>

            <tr>
                <th>Title</th>
                <th>Status</th>
                <th>Update</th>
            </tr>

            <tr th:each="book: ${books}">

                <td th:text="${book.title}">Don't Let the Pigeon Drive the Bus!</td>
                <td th:text="${book.status}">unread</td>

                <td>
                    <form method="POST" th:action="@{~/books/{isbn}(isbn=${book.isbn})}">
                        <input type="hidden" name="book" th:value="${book.isbn}"/>
                        <input type="hidden" name="status" value="unread"/>
                        <input type="submit" value="Unread!"/>
                    </form>
                    <form method="POST" th:action="@{~/books/{isbn}(isbn=${book.isbn})}">
                        <input type="hidden" name="book" th:value="${book.isbn}"/>
                        <input type="hidden" name="status" value="reading"/>
                        <input type="submit" value="Reading!"/>
                    </form>
                    <form method="POST" th:action="@{~/books/{isbn}(isbn=${book.isbn})}">
                        <input type="hidden" name="book" th:value="${book.isbn}"/>
                        <input type="hidden" name="status" value="read"/>
                        <input type="submit" value="Read!"/>
                    </form>
                </td>
            </tr>

        </table>

        <h2>Add a new book</h2>

        <form id="addbook" method="POST" th:action="@{~/books}">
            <table>

                <tr>
                    <th>ISBN</th>
                    <th>Title</th>
                    <th></th>
                </tr>

                <tr>
                    <td><input type="text" name="isbn"/></td>
                    <td><input type="text" name="title"/></td>
                    <td>
                        <input type="submit" value="Add!"/>
                    </td>
                </tr>
            </table>

        </form>

    </body>
</html>
